{% extends 'base.html' %}
{% block title %} Job Details {% endblock title %}
{% load humanize %}
{% load custom_filters %}
{% block content %}
    <!-- Begin page -->
        <div>

           

            <div class="main-content">

                <div class="page-content">

                                          <div class="breadcrumbs overlay  mt-1" >
<div class="container">
<div class="row align-items-center">
<div class="col-lg-6 col-md-6 col-12">
<div class="breadcrumbs-content">
<h1 class="page-title">{{profile.user.username}}'s Profile</h1>

</div>
</div>
<div class="col-lg-6 col-md-6 col-12">
<ul class="breadcrumb-nav float-sm-start float-lg-end float-md-end">
<li><a href="{% url 'home' %}">Home</a></li>
<li> <a href="{% url 'jobs' %}">Jobs</a> </li>
<li>{{profile.user.username}}'s Profile</li>
</ul>
</div>
</div>
</div>
</div>
                    <!-- START PROFILE -->
                    <section class="section">
                        <div class="container">
                            <div class="row">
                                <div class="col-lg-4">
                                    <div class="card profile-sidebar me-lg-4">
                                        <div class="card-body p-4">
                                            <div class="text-center pb-4 border-bottom">
                                                <img src="{{profile.profile.url}}" alt="...."
                                                    class="avatar-lg img-thumbnail rounded-circle mb-4" />
                                                <h5 class="mb-0">{{profile.firstname}} {{profile.lastname}}</h5>
                                                <p class="text-muted">{{profile.title}}</p>
                                                <ul class="list-inline d-flex justify-content-center align-items-center ">
                                                    <li class="list-inline-item text-warning fs-19">
                                            {% if  profile.averageview > 1 %} <i  class="mdi mdi-star"></i> {% else %} <i class="mdi mdi-star-outline text-dark"></i>   {% endif %}
                                            {% if  profile.averageview > 2 %} <i  class="mdi mdi-star"></i> {% else %} <i class="mdi mdi-star-outline text-dark"></i>   {% endif %}
                                            {% if  profile.averageview > 3 %} <i  class="mdi mdi-star"></i> {% else %} <i class="mdi mdi-star-outline text-dark"></i>   {% endif %}
                                            {% if  profile.averageview > 4 %} <i  class="mdi mdi-star"></i> {% else %} <i class="mdi mdi-star-outline text-dark"></i>   {% endif %}
                                            {% if  profile.averageview > 5 %} <i  class="mdi mdi-star"></i> {% else %} <i class="mdi mdi-star-outline text-dark"></i>   {% endif %}
                                                 <span  class="text-dark">( {{profile.averageview | stringformat:".2f"}})</span>       
                                                 
                                                    </li>
                                                    
                                                </ul>
                                                <ul class="candidate-detail-social-menu list-inline mb-0">
                                                  
                                                  {% if profile.facebook %}
                                                    <li class="list-inline-item">
                                                        
                                                        <a href="{{profile.facebook}}"  target="_blank"  class="social-link rounded-3 btn-soft-primary"><i
                                                                class="uil uil-facebook-f"></i></a>
                                                    </li>
                                                  {% endif %}
                                                    
                                                    
                                                    {% if  profile.twitter %}
                                                         <li class="list-inline-item">
                                                        <a href="{{profile.twitter}}"  target="_blank"  class="social-link rounded-3 btn-soft-info"><i
                                                                class="uil uil-twitter-alt"></i></a>
                                                    </li>
                                                    {% endif %}
                                                        
                                                   
                                                   {% if profile.instagram %}
                                                    <li class="list-inline-item">
                                                        <a href="{{profile.instagram}}"  target="_blank"  class="social-link rounded-3 btn-soft-success"><i
                                                                class="uil uil-instagram"></i></a>
                                                    </li>
                                                   {% endif %}
                                                    
                                                    
                                                   
                                                   {% if profile.website %}
                                                     <li class="list-inline-item">
                                                        <a href="{{profile.website}}"  target="_blank"  class="social-link rounded-3 btn-soft-danger"><i
                                                                class="mdi mdi-web"></i></a>
                                                    </li>
                                                   {% endif %}
                                                    
                                                </ul>
                                            </div>
                                            <!--end profile-->
                                            <div class="mt-4 border-bottom pb-4">
                                                <h5 class="fs-17 fw-bold mb-3">Documents</h5>
                                                <ul class="profile-document list-unstyled mb-0">
                                                  {% for document in profile.profile_cv.all %}  
                                                    <li>
                                                        <div class="profile-document-list d-flex align-items-center mt-4 ">
                                                           
                                                                  
                                                           <div class="icon flex-shrink-0">
                                                                <i class="uil uil-file"></i>
                                                            </div>
                                                                 <div class="ms-3">
                                                                                                                   
    <h6 class="fs-16 mb-0">  <a class="text-decoration-none text-dark" target="_blank" href="{{document.cv.url}}">{{document.cv.name|basename}}</a></h6>


                                                                
                                                            </div>
                                                            <div class="ms-auto">
                                                                <a arget="_blank" href="{{document.cv.url}}" download="dark-logo" class="fs-20 text-muted"><i class="uil uil-import"></i></a>
                                                            </div>
                                                               
                                                        </div>
                                                    </li>
                                                   
                                                         {% endfor %}
                                                       
                                                </ul>
                                            </div>
                                            <!--end document-->
                                            <div class="mt-4">
                                                <h5 class="fs-17 fw-bold mb-3">Contacts</h5>
                                                <div class="profile-contact">
                                                    <ul class="list-unstyled mb-0">
                                                        <li>
                                                            <div class="d-flex">
                                                                <label>Email</label>
                                                                <div>
                                                                    <p class="text-muted text-break mb-0">
                                                                        {{profile.user.email}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="d-flex">
                                                                <label>Phone Number</label>
                                                                <div>
                                                                    <p class="text-muted mb-0">{{profile.tell}}</p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="d-flex">
                                                                <label>Location</label>
                                                                <div>
                                                                    <p class="text-muted mb-0">{{profile.county}}, {{profile.location}}, {{profile.address}} </p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="mt-4">
                                                <h5 class="fs-17 fw-bold mb-3">More Info</h5>
                                                <div class="profile-contact">
                                                    <ul class="list-unstyled mb-0">
                                                        <li>
                                                            <div class="d-flex">
                                                                <label>User Type</label>
                                                                <div>
                                                                    <p class="text-muted text-break mb-0">
                                                                        {{profile.user_type}}
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="d-flex">
                                                                <label>Gender</label>
                                                                <div>
                                                                    <p class="text-muted mb-0">{{profile.gender}}</p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="d-flex">
                                                                <label>Date Of Birth</label>
                                                                <div>
                                                                    <p class="text-muted mb-0">{{profile.dob}} </p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="mt-4">
                                                <h5 class="fs-17 fw-bold mb-3">Account Details </h5>
                                                <div class="profile-contact">
                                                    <ul class="list-unstyled mb-0">
                                                        <li>
                                                            <div class="d-flex">
                                                                <label>Jobs Posted</label>
                                                                <div>
                                                                    <p class="text-muted text-break mb-0">
                                                                        <span class="badge rounded-pill text-bg-secondary"> {{jobs}}</span>

                                                                       
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="d-flex bg-danger">
                                                                <label>All Applications</label>
                                                                <div>
                                                                    <p class="text-muted text-break mb-0 "> 
                                                                         <span class="badge rounded-pill text-bg-info"> <span class="pl-2">  {{applications}}</span></span>
                                                                       </p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                        <li>
                                                            <div class="d-flex">
                                                                <label class="mr-3 pr-4">Successfull Application</label>
                                                                <div>
                                                                    <p class="text-muted ml-3  mb-0">
                                                                       <span class="badge rounded-pill text-bg-success"> {{successful_applications}}</span>
                                                                    </p>
                                                                </div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                             <div class="mt-4">
                                                <div class="d-grid gap-2 col-8 mx-auto">
   <a href="{% url 'update-profile' profile.slug %}" class="btn btn-outline-primary">Update Profile</a>
 
</div>
        
                                            </div>
                                           
                                    <!--end contact-details-->
                                        </div>
                                        <!--end card-body-->
                                    </div>
                                    <!--end profile-sidebar-->
                                </div>
                                <!--end col-->
                                <div class="col-lg-8">
                                    <div class="card profile-content-page mt-4 mt-lg-0">
                                        <ul class="profile-content-nav nav nav-pills border-bottom mb-4" id="pills-tab"
                                                role="tablist">
                                                <li class="nav-item" role="presentation">
                                                    <button class="nav-link active" id="overview-tab" data-bs-toggle="pill"
                                                        data-bs-target="#overview" type="button" role="tab" aria-controls="overview"
                                                        aria-selected="true">
                                                        Overview
                                                    </button>
                                                </li>
                                               
                                            </ul>
                                            <!--end profile-content-nav-->
                                        <div class="card-body p-4">
                                            <div class="tab-content" id="pills-tabContent">
                                                <div class="tab-pane fade show active" id="overview" role="tabpanel"
                                                    aria-labelledby="overview-tab">
                                                    <div>
                                                        <h5 class="fs-18 fw-bold">About</h5>
                                                        <p class="text-muted mt-4">
                                                            {{profile.bio}}
                                                        </p>
                                                        
                                                    </div>
                                                    <div class="candidate-education-details mt-4">
                                                        <h6 class="fs-18 fw-bold mb-0">Education</h6>
                                                        <div class="candidate-education-content mt-4 d-flex">
                                                            <div class="circle flex-shrink-0 bg-soft-primary">
                                                                B
                                                            </div>
                                                            <div class="ms-4">
                                                                <h6 class="fs-16 mb-1">
                                                                    BCA - Bachelor of Computer Applications
                                                                </h6>
                                                                <p class="mb-2 text-muted">
                                                                    International University - (2004 - 2010)
                                                                </p>
                                                                <p class="text-muted">
                                                                    There are many variations of passages of available,
                                                                    but the majority alteration in some form. As a
                                                                    highly skilled and successfull product development
                                                                    and design specialist with more than 4 Years of My
                                                                    experience.
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="candidate-education-content mt-3 d-flex">
                                                            <div class="circle flex-shrink-0 bg-soft-primary">
                                                                M
                                                            </div>
                                                            <div class="ms-4">
                                                                <h6 class="fs-16 mb-1">
                                                                    MCA - Master of Computer Application
                                                                </h6>
                                                                <p class="mb-2 text-muted">
                                                                    International University - (2010 - 2012)
                                                                </p>
                                                                <p class="text-muted">
                                                                    There are many variations of passages of available,
                                                                    but the majority alteration in some form. As a
                                                                    highly skilled and successfull product development
                                                                    and design specialist with more than 4 Years of My
                                                                    experience.
                                                                </p>
                                                            </div>
                                                        </div>
                                                        <div class="candidate-education-content mt-3 d-flex">
                                                            <div class="circle flex-shrink-0 bg-soft-primary">
                                                                D
                                                            </div>
                                                            <div class="ms-4">
                                                                <h6 class="fs-16 mb-1">Design Communication Visual</h6>
                                                                <p class="text-muted mb-2">
                                                                    International University - (2012-2015)
                                                                </p>
                                                                <p class="text-muted">
                                                                    There are many variations of passages of available,
                                                                    but the majority alteration in some form. As a
                                                                    highly skilled and successfull product development
                                                                    and design specialist with more than 4 Years of My
                                                                    experience.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="candidate-education-details mt-4">
                                                        <h6 class="fs-18 fw-bold mb-0">Experiences</h6>
                                                        <div class="candidate-education-content mt-4 d-flex">
                                                            <div class="circle flex-shrink-0 bg-soft-primary"> W </div>
                                                            <div class="ms-4">
                                                                <h6 class="fs-16 mb-1">Web Design & Development Team Leader</h6>
                                                                <p class="mb-2 text-muted">Creative Agency - (2013 - 2016)</p>
                                                                <p class="text-muted">There are many variations of passages of available, but the majority alteration in some form. As a highly skilled and successfull product development and design specialist with more than 4 Years of My experience.</p>
                                                            </div>
                                                        </div>
                                                        <div class="candidate-education-content mt-4 d-flex">
                                                            <div class="circle flex-shrink-0 bg-soft-primary"> P </div>
                                                            <div class="ms-4">
                                                                <h6 class="fs-16 mb-1">Project Manager</h6>
                                                                <p class="mb-2 text-muted">Jobvia Technology Pvt.Ltd - (Pressent)</p>
                                                                <p class="text-muted mb-0">There are many variations of passages of available, but the majority alteration in some form. As a highly skilled and successfull product development and design specialist with more than 4 Years of My experience.</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="mt-4">
                                                        <h5 class="fs-18 fw-bold">Skills</h5>
                                                        
                                                        <span class="badge fs-13 bg-soft-blue mt-2">{{profile.skills}}</span>
                                                    </div>
                                                    <!-- Template file -->
<form id="education-form" method="post">
  {% csrf_token %}
  {{ formset.management_form }}

  <div id="education-fields">
    <!-- Existing education fields (if any) -->
    {% for form in formset %}
    <div class="education-field">
      <!-- Education input fields -->
      {{ form.degree }}
      {{ form.institution }}
      {{ form.start_year }}
      {{ form.end_year }}
      <!-- Remove button -->
      <button type="button" class="remove-education">Remove</button>
    </div>
    {% endfor %}
  </div>
  
  <!-- Add education button -->
  <button type="button" id="add-education">Add Education</button>
  
  <!-- Submit button -->
  <button type="submit">Save</button>
</form>

<!-- Form template for a single education field -->
<div id="form-template" style="display: none;">
  <div class="education-field">
    <input type="text" name="form-__prefix__-degree" value="">
    <input type="text" name="form-__prefix__-institution" value="">
    <input type="number" name="form-__prefix__-start_year" value="">
    <input type="number" name="form-__prefix__-end_year" value="">
    <button type="button" class="remove-education">Remove</button>
  </div>
</div>

<script>
  // Add click event listener to the "Add Education" button
  document.getElementById('add-education').addEventListener('click', function() {
    addEducationField();
  });

  // Add click event listener to the "Remove" buttons
  document.addEventListener('click', function(event) {
    if (event.target.classList.contains('remove-education')) {
      removeEducationField(event.target.parentNode);
    }
  });

  // Function to add a new education field
  function addEducationField() {
    var educationFields = document.getElementById('education-fields');
    var formCount = educationFields.childElementCount;

    // Retrieve the HTML template for a new form
    var formTemplate = document.getElementById('form-template').innerHTML;

    // Replace the form prefixes in the template with the updated count
    var newFormHtml = formTemplate.replace(/__prefix__/g, formCount);

    // Create a new form element from the HTML template
    var newForm = document.createElement('div');
    newForm.classList.add('education-field');
    newForm.innerHTML = newFormHtml;

    // Append the new form to the education fields
    educationFields.appendChild(newForm);
  }

  // Function to remove an education field
  function removeEducationField(field) {
    field.parentNode.removeChild(field);
  }
</script>

                                                    <!-- Template file -->
<form id="education-form">
  <div id="education-fields">
    <!-- Existing education fields (if any) -->
    {% for education in profile.education.all %}
    <div class="education-field">
      <!-- Education input fields -->
      <input type="text" name="degree" value="{{ education.degree }}">
      <input type="text" name="institution" value="{{ education.institution }}">
      <input type="number" name="start_year" value="{{ education.start_year }}">
      <input type="number" name="end_year" value="{{ education.end_year }}">
      <!-- Remove button -->
      <button type="button" class="remove-education">Remove</button>
    </div>
    {% endfor %}
  </div>
  <!-- Add education button -->
  <button type="button" id="add-education">Add Education</button>
  <!-- Submit button -->
  <button type="submit">Save</button>
</form>

<script>
  // Add click event listener to the "Add Education" button
  document.getElementById('add-education').addEventListener('click', function() {
    addEducationField();
  });

  // Add click event listener to the "Remove" buttons
  document.addEventListener('click', function(event) {
    if (event.target.classList.contains('remove-education')) {
      removeEducationField(event.target.parentNode);
    }
  });

  // Function to add a new education field
  function addEducationField() {
    var educationFields = document.getElementById('education-fields');
    var newField = document.createElement('div');
    newField.classList.add('education-field');
    newField.innerHTML = `
      <input type="text" name="degree" value="">
      <input type="text" name="institution" value="">
      <input type="number" name="start_year" value="">
      <input type="number" name="end_year" value="">
      <button type="button" class="remove-education">Remove</button>
    `;
    educationFields.appendChild(newField);
  }

  // Function to remove an education field
  function removeEducationField(field) {
    field.parentNode.removeChild(field);
  }
</script>

                                                   
                                                </div>
                                               
                                            </div>
                                            <!--end tab-content-->
                                        </div>
                                        <!--end card-body-->
                                    </div>
                                    <!--end profile-content-page-->
                                </div>
                                <!--end col-->
                            </div>
                            <!--end row-->
                        </div>
                        <!--end container-->
                    </section>
                    <!-- END PROFILE -->

                </div>
                <!-- End Page-content -->

                

              
            </div>
            <!-- end main content-->

        </div>
        <!-- END layout-wrapper -->  









{% endblock content %}
    