{% extends 'base.html' %}
{% block title %} Post Job {% endblock title %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
    <div>
        <div class="main-content">

                <div class="page-content">

                                   
 <div class="breadcrumbs overlay  mt-1" >
<div class="container">
<div class="row align-items-center">
<div class="col-lg-6 col-md-6 col-12">
<div class="breadcrumbs-content">
<h1 class="page-title">Post Job</h1>

</div>
</div>
<div class="col-lg-6 col-md-6 col-12">
<ul class="breadcrumb-nav float-sm-start float-lg-end float-md-end">
<li><a class="text-decoration-none" href="{% url 'home' %}">Home</a></li>
<li>Post Job</li>
</ul>
</div>
</div>
</div>
</div>
 {% if user.user_profile.firstname == "" and user.user_profile.lastname == "" %}
<br>

<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="alert alert-warning alert-dismissible fade show text-center" role="alert">
  <strong class="pl-2">Hello {{user.username}} !  </strong> Please complete your profile first for you to post job. <a href="{% url 'user-profile' user.user_profile.slug %}" class="pl-3 alert-link">Update Profile</a>.
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div> 
        </div>
    </div>
</div>
<br>
{% endif %}
                    <!-- START JOB-LIST -->
                    <section class="section" style="padding-top:0px;padding-bottom:0px;"> 
                          <div class="add-blog">
                        <div class="container">
                          
                            <div class="row">
                            <div class="row justify-content-center pt-3 mt-3">
                                <div class="col-lg-7">
                                    <div class="section-title text-center mb-4 pb-2">
                                        <h4 class="title">Post Jobs Form</h4>
                                        <p class="text-muted mb-1">Post a job to tell us about your project. We'll quickly match you
                                            with the right freelancers.</p>
                                    </div>
                                </div><!--end col-->
                            </div><!--end row-->
                                <div class="col-lg-10 mx-auto">
                                     
                                   <form action="" method="post" enctype="multipart/form-data" class="p-5 mb-3 mt-4 border rounded-3 bg-white" onsubmit="return validateImageSize()">
    {% csrf_token %}
    {{form | crispy }}
     {% if user.user_profile.firstname == "" and user.user_profile.lastname == "" %}

     <br>

<div class="container">
    <div class="row">
        <div class="col-12">
            <div class="alert alert-warning alert-dismissible fade show text-center" role="alert">
  <strong class="pl-2">Hello {{user.username}} !  </strong> Please complete your profile first for you to post job. <a href="{% url 'user-profile' user.user_profile.slug %}" class="pl-3 alert-link">Update Profile</a>.
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div> 
        </div>
    </div>
</div>
<br>
{% else %}
    <div class="d-grid gap-2 col-6 mx-auto pt-2">
    <button type="submit" class="btn btn-success">Submit </button>
    </div>
    {% endif %}
</form> 
                                    
                                </div><!--end col-->

                            </div><!--end row-->

                    
                        </div><!--end container-->
                    </section>
                    <!-- END JOB-form -->

                    
                </div>
                <!-- End Page-content -->

                

               
</div>
                
            </div>
            <!-- end main content-->

    </div>


<script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
<script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
{% block scripts %}
<script>
   $("#job_tags").select2(); 
</script>
<script>
function validateImageSize() {
        const fileInput = document.querySelector('#id_images'); // Replace with your image input field ID
        const maxSize = 1 * 1024 * 1024; // 4 MB (adjust this value as needed)

        if (fileInput.files.length > 0) {
            const fileSize = fileInput.files[0].size; // Size of the selected file in bytes

            if (fileSize > maxSize) {
                alert("File size is too large. Please select an image less than 4MB.");
                return false; // Prevent form submission
            }
        }

        return true; // Allow form submission if size is within limit
    }
</script>


{% endblock scripts %}
{% endblock content %}
    